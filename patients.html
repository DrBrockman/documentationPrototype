<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
   
    <style>
       .btn-activeF {
    background-color: #007bff;
    color: white;
}
.mobileExerciseLayout {
    border: 1px solid #000000;
    padding: 4px;
    border-radius: 5px;
    box-shadow: 0px 0px 10px 0px #ebebeb;
   
}
.SR {
    float: right;
}

.afta::after {
  content: " LBS";
  color: rgb(0, 0, 0);
  font-size: 50%;
}

      </style>
</head>
<body>

  <div class="container-fluid mt-1">
    <button class="btn btn-primary w-80" id="fetchBtn">Fetch People</button>
    <h1>Person List</h1>
    <table class="table">
      <thead>
        <tr class=''>
          <th>Name</th>
          <th>Date</th>
          
        </tr>
      </thead>
      <tbody id="personTableBody">
        <!-- JavaScript will populate rows here -->
      </tbody>
    </table>
  </div>
  
 <!-- Modal for editing person details -->
 <div class="modal fade" id="editModal" tabindex="-1" role="dialog">
  <div class="modal-dialog modal-fullscreen " role="document">
    <div class="modal-content">
      <div class="modal-header position-relative">
        <button type="button"  class="position-absolute btn btn-danger" id="deletePerson">Delete</button>
        <h5 class="modal-title w-100 text-center "> </h5>
        
        <button type="button" class="btn-close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true"></span>
        </button>
      </div>
      <div class="modal-body ">
        
        <form id="editForm">
          
          
            
              
                <div class="row g-3">
                  <div class="col-6">
                    <div class="form-group">
                      <label for="name">Name</label>
                      <input type="text" class="form-control" id="name" name="name">
                    </div>
                  </div>
                  <div class="col">
                    <label for="start">Start</label>
                    <input type="text" class="form-control" id="start" aria-label="First name">
                  </div>
                  <div class="col">
                    <label for="end">End</label>
                    <input type="text" class="form-control" id="end" aria-label="Last name">
                  </div>
                </div>
                
                <div class="form-floating pb-3 pt-3" >
                  <textarea class="form-control" id="subjective" name="subjective" placeholder="Subjective"></textarea>
                  <label for="subjective">Subjective</label>
                </div>
                
                <div class=" btn-group btn-group-sm  pb-1" role="group" aria-label="Basic radio toggle button group" style='width: 100%;'>
                    <button class="btn btn-outline-primary collapse-button" type="button" data-toggle="collapse" data-target="#collapseContent1" aria-expanded="false" aria-controls="collapseContent0">Exercises</button>
                    <button class="btn btn-outline-primary collapse-button" type="button" data-toggle="collapse" data-target="#collapseContent2" aria-expanded="false" aria-controls="collapseContent1">Functional</button>
                  <button class="btn btn-outline-primary collapse-button" type="button" data-toggle="collapse" data-target="#collapseContent3" aria-expanded="false" aria-controls="collapseContent2">Soft Tissue</button>
                  <button class="btn btn-outline-primary collapse-button" type="button" data-toggle="collapse" data-target="#collapseContent4" aria-expanded="false" aria-controls="collapseContent3">Joint</button>
                  <button class="btn btn-outline-primary collapse-button" type="button" data-toggle="collapse" data-target="#collapseContent5" aria-expanded="false" aria-controls="collapseContent4">Dry Needle</button>
                </div>
                <div class="container-fluid collapse collapse-content" id="collapseContent1">
                    <div class="" id="container">
                    </div>
                    <div id='listExercises' class="    ">
                        
                    </div>
                </div>
                <div class="collapse collapse-content" id="collapseContent2">
                  <div class="d-flex flex-wrap gap-1" >
                    <input type="checkbox" class=" btn-check " id="btnCheck1" autocomplete="off">
                    <label class="btn btn-outline-primary" for="btnCheck1">ADL</label>
                  
                    <input type="checkbox" class=" btn-check" id="btnCheck2" autocomplete="off">
                    <label class="btn btn-outline-primary" for="btnCheck2">Balance</label>
                  
                    <input type="checkbox" class="btn-check" id="btnCheck3" autocomplete="off">
                    <label class="btn btn-outline-primary" for="btnCheck3">Endurance</label>
                    <input type="checkbox" class=" btn-check" id="btnCheck4" autocomplete="off">
                    <label class="btn btn-outline-primary" for="btnCheck4">Ergonomics</label>
                    <input type="checkbox" class="btn-check" id="btnCheck5" autocomplete="off">
                    <label class="btn btn-outline-primary" for="btnCheck5">Gait</label>
                    <input type="checkbox" class="btn-check" id="btnCheck6" autocomplete="off">
                    <label class="btn btn-outline-primary" for="btnCheck6">Posture</label> 
                    <input type="checkbox" class="btn-check" id="btnCheck7" autocomplete="off">
                    <label class="btn btn-outline-primary" for="btnCheck7">Athletics</label>
                    <input type="checkbox" class="btn-check" id="btnCheck8" autocomplete="off">
                    <label class="btn btn-outline-primary" for="btnCheck8">Transfers</label>
                    <input type="checkbox" class="btn-check" id="btnCheck9" autocomplete="off">
                    <label class="btn btn-outline-primary" for="btnCheck9">Work Task</label>
                  </div>
                </div>

                <div class="collapse collapse-content" id="collapseContent3">
                  <div class="form-floating pb-3" >
                    <textarea class="form-control" id="softy" name="softy" placeholder="Soft Tissue"></textarea>
                    <label for="softy">Soft Tissue</label>
                  </div>
                </div>


                <div class="collapse collapse-content" id="collapseContent4">
                  <div class="form-floating pb-3" >
                    <textarea class="form-control" id="mob" name="mob" placeholder="Joint Mobilization"></textarea>
                    <label for="mob">Joint Mobilization</label>
                  </div>
                </div>
                
                <div class="collapse collapse-content" id="collapseContent5">
                  <div class="form-floating pb-3" >
                    <textarea class="form-control" id="dn" name="dn" placeholder="Dry Needling"></textarea>
                    <label for="dn">Dry Needling</label>
                  </div>
                </div>

          
                <div class="form-floating pt-3 pb-3" >
                  <textarea class="form-control" id="assessment" name="assessment" placeholder="Assessment"></textarea>
                  <label for="assessment">Assessment</label>
                </div>

                <div class="form-floating pb-3" >
                  <textarea class="form-control" id="plan" name="plan" placeholder="Plan"></textarea>
                  <label for="plan">Plan</label>
                </div>

                <div class="input-group mb-3">
                  <span class="input-group-text" id="basic-addon2">TE</span>
                  <input type="text" class="form-control"  >
                  <span class="input-group-text" id="basic-addon">TA</span>
                  <input type="text" class="form-control"   >
                  <span class="input-group-text" id="basic-addon2">Manual</span>
                  <input type="text" class="form-control"  >
                  <span class="input-group-text" id="basic-addon">NMRE</span>
                  <input type="text" class="form-control"   >
                </div>

  
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-primary" id="saveChanges">Save Changes</button>
      </div>
    </div>
  </div>
</div>

<!-- Modal for adding exercises -->
<div class="modal" id="myModal" data-backdrop="false">
    <div class="modal-dialog modal-fullscreen">
        <div class="modal-content">

            <!-- Modal Header -->
            
            <div class="modal-body" id="modalBody">
               
                <!-- Content from the loaded HTML page will be displayed here -->
            </div>

            <!-- Modal footer -->
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" id="addExercises">Add Exercises</button>
            </div>

        </div>
    </div>
</div>

<div class="modal fade" id="exerciseEditModal" data-backdrop="false" tabindex="-1"  aria-hidden="true">
    <div class="modal-dialog modal-fullscreen">
      <div class="modal-content">
        <div class="modal-header">
            
          <h5 class="modal-title" id="editModalLabel">Edit Exercise</h5>
          <button type="button" class="btn-close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true"></span>
          </button>   
          
            
                 </div>
        <div class="modal-body position-relative">
            
            <input type="text" id="modalExerName" class="form-control mb-2" placeholder="Exercise Name">
            <div id= "resistanceTypesGroup" class="btn-group" role="group" aria-label="Basic radio toggle button group">
                <input type="radio" class="btn-check" name="btnradio" id="btnradio1" autocomplete="off" >
                <label class="btn btn-outline-primary" for="btnradio1">Machine</label>
              
                <input type="radio" class="btn-check" name="btnradio" id="btnradio2" autocomplete="off">
                <label class="btn btn-outline-primary" for="btnradio2">TB</label>
              
                <input type="radio" class="btn-check" name="btnradio" id="btnradio3" autocomplete="off">
                <label class="btn btn-outline-primary" for="btnradio3">DB</label>
                <input type="radio" class="btn-check" name="btnradio" id="btnradio4" autocomplete="off">
                <label class="btn btn-outline-primary" for="btnradio4">KB</label>
                <input type="radio" class="btn-check" name="btnradio" id="btnradio5" autocomplete="off">
                <label class="btn btn-outline-primary" for="btnradio5">Bodyweight</label>
              </div>

              <input type="text" id="modalDurationName" class="form-control mb-2" placeholder="Duration">
              <input type="text" id="modalSetName" class="form-control mb-2" placeholder="Sets">
              <input type="text" id="modalRepName" class="form-control mb-2" placeholder="Reps">
              <input type="text" id="modalBoutName" class="form-control mb-2" placeholder="Bouts">
              <input type="text" id="modalSecondsName" class="form-control mb-2" placeholder="Seconds">
              <input type="text" id="modalWeightName" class="form-control mb-2" placeholder="Weight">
              <input type="text" id="modalColorName" class="form-control mb-2" placeholder="Color">
        
            
                <button type="button" class="position-absolute bottom-0 start-0 ms-4 btn btn-secondary " id="prevExercise">Previous</button>
            <button type="button" class="position-absolute bottom-0 end-0 me-4 btn btn-secondary " id="nextExercise">Next</button>
            
            
        
    </div>
        <div class="modal-footer">
            
                
            
          <button type="button" class="btn btn-primary w-100" id="saveExChanges">Save changes</button>
        </div>
      </div>
    </div>
  </div>
   
<script>
       $(document).ready(function () {

 $('#myModal').on('shown.bs.modal', function () {
    $('#modalBody').load('exercise.html');
    checkedElementsArray=[];
    });
var addExercises = document.getElementById('addExercises');
addExercises.addEventListener('click', () => {
    const editForm = document.getElementById('editForm');
  const index = editForm.getAttribute('data-person-index');
    exercises.push(...checkedElementsArray)
    populateExercises (checkedElementsArray);
    personsArray[index].exercises = exercises;
    localStorage.setItem('pt', JSON.stringify(personsArray));
    $('#myModal').modal('hide');
})


var saveChangesButton = document.getElementById('saveChanges');
saveChangesButton.addEventListener('click', () => {
  const editForm = document.getElementById('editForm');
  const index = editForm.getAttribute('data-person-index');

  // Update the person's data in the array
  personsArray[index].name = editForm.name.value;
  personsArray[index].start = editForm.start.value;
  personsArray[index].end = editForm.end.value;
  personsArray[index].subjective = editForm.subjective.value;
  personsArray[index].softy = editForm.softy.value;
  personsArray[index].dn = editForm.dn.value;
  personsArray[index].mob = editForm.mob.value;
  personsArray[index].assessment = editForm.assessment.value;
  personsArray[index].plan = editForm.plan.value;
  personsArray[index].exercises = exercises;
  
  // Update other fields as needed

  // Save the updated array back to local storage
  localStorage.setItem('pt', JSON.stringify(personsArray));

  // Close the modal
  $('#editModal').modal('hide');

  // Update the table to reflect the changes
  updateTable();
});

$('.collapse-button').on('click', function() {
        // Toggle active class for the clicked button
        $(this).toggleClass('btn-activeF');

        // Remove active class from other buttons
        $('.collapse-button').not(this).removeClass('btn-activeF');

        // Hide other collapse contents
        $('.collapse-content').not($(this).attr('data-target')).collapse('hide');
    });
    updateTable();
var removePersonButton = document.getElementById('deletePerson');

removePersonButton.addEventListener('click', () => {
  const editForm = document.getElementById('editForm');
  const index = editForm.getAttribute('data-person-index');

  // Check if an index is valid
  if (index !== null && index !== undefined) {
    // Remove the person by index
    removePersonByIndex(parseInt(index));

    // Optionally, close the edit modal or perform any other necessary actions
    $('#editModal').modal('hide');
  }
});
var fetchBtn = document.getElementById("fetchBtn");
fetchBtn.addEventListener("click", getit);

$('#saveExChanges').click(function() {
    autoSaveExercises();
    $('#exerciseEditModal').modal('hide');
  });
  
  // Navigate to previous exercise
  $('#prevExercise').click(function() {
    if (currentExerciseIndex > 0) {
        autoSaveExercises();
      currentExerciseIndex--;
      populateModal(currentExerciseIndex);
    }
  });
  
  // Navigate to next exercise
  $('#nextExercise').click(function() {
    if (currentExerciseIndex < totalExercises - 1) {
        autoSaveExercises();
      currentExerciseIndex++;
      populateModal(currentExerciseIndex);
    }
  });  


  });
</script>
    
</html>
